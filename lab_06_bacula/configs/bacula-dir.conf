Director {
  Name = bacula-dir
  # какой порт слушать (используется значение по умолчанию)
  DIRport = 9101
  # путь к сценарию, содержащему sql запросы для работы с Bacula Catalog
  QueryFile = "/etc/bacula/scripts/query.sql"
  # папка в которой лежат статус-файлы Директора
  WorkingDirectory = "/var/lib/bacula"
  # pid-файл демона Директора
  PidDirectory = "/run/bacula"
  # Максимальное количество выполняемых заданий.
  # (не рекомендуется одновременно запускать более одного задания)
  Maximum Concurrent Jobs = 1
  # Пароль Директора
  Password = "dirpass"
  # Конфигурация параметров уведомлений (описано в секции Messages)
  Messages = Standard
  # IP-адрес Директора
  DirAddress = 192.168.122.13
}

# Подключение к базе данных (Bacula Catalog)
  Catalog {
  Name = BaculaCatalog
  # имя базы данных на сервере PostgreSQL
  dbname = "bacula"
  # адрес сервера БД PostgreSQL
  DB Address = "192.168.122.13"
  # порт подключения на сервере
  DB PORT = 5432
  # имя пользователя базы данных на сервере PostgreSQL
  dbuser = "bacula"
  dbpassword = "bacula"
}

# Подключение к Хранилищу (Storage)
  Storage {
  Name = stor-sd
  # IP-адрес хранилища.
  Address = 192.168.122.13
  # порт оставляем стандартный
  SDPort = 9103
  Password = "storpass"
  # имя устройства хранения, описаное в файле bacula-sd.conf
  Device = DevStorage
  # Должно соответствовать директиве Media Type ресурса Device настройки
  Media Type = File1
  # Максимальное количество выполняемых заданий.
  # (не рекомендуется одновременно запускать более одного задания)
  Maximum Concurrent Jobs = 1
}

# Настройка групп томов Хранилища (Pool's). Определяет набор носителей информации и параметры
# их обработки
Pool {
  Name = File
  # тип пула
  Pool Type = Backup
  # Bacula может автоматически очищать или перезаписывать тома пула
  Recycle = yes
  # период в течении которого информация о заданиях и файлах хранится в БД
  Volume Retention = 365 days
  # удалять из БД записи о заданиях и файлах , срок хранения которых истёк
  AutoPrune = yes
  # максимальный объем тома в пуле
  Maximum Volume Bytes = 5G
  # максимальное количество томов в пуле
  Maximum Volumes = 100
  # с каких символов начинаются имена томов пула
  Label Format = "Vol-"
}

Messages {
  Name = Standard
  # команда отправки письма
  mailcommand = "/usr/sbin/bsmtp -h localhost -f \"\(Bacula\) \<%r\>\" -s \"Bacula: %t %e of %c %l\" %r"
  # команда для передачи сообщений оператору
  operatorcommand = "/usr/sbin/bsmtp -h localhost -f \"\(Bacula\) \<%r\>\" -s \"Bacula: Intervention needed for%j\" %r"
  # куда = кому = и какие уведомления отправлять
  mail = root = all, !skipped
  # требование к оператору смонтировать том по необходимости
  operator = root = mount
  # какие сообщения выводить в консоль
  console = all, !skipped, !saved
  # путь к логу = какие сообщения записывать в лог
  append = "/var/log/bacula/bacula.log" = all, !skipped
  # записывать в СУБД в таблицу Log; очищается одновременно с удалением записи о задании
  catalog = all
}

# эта строка подгружает все конфигурационные файлы из папки «job.d»
@|"sh -c 'for f in /etc/bacula/job.d/*.conf ; do echo @${f} ; done'"
Schedule {
  Name = "WeeklyCycle"
  # Тип бекапа, периодичность и время запуска
  Run = Full 1st sun at 23:05
  Run = Differential 2nd-5th sun at 23:05
  Run = Incremental mon-sat at 23:05
}

Client {
  Name = dir-fd
  #IP-адрес Клиента
  Address = 192.168.122.20
  # порт, который клиент слушает
  FDPort = 9102
  # имя PostgreSQL базы данных Bacula
  Catalog = BaculaCatalog
  # пароль Клиента
  Password = "clientpass"
  # период, в течении которого информация о ФАЙЛАХ хранится в базе данных
  File Retention = 60 days
  # период, в течении которого информация о ЗАДАНИЯХ хранится в базе данных
  Job Retention = 6 months
  # удалять записи из Bacula Catalog старше вышеуказанных значений
  AutoPrune = yes
}

FileSet {
  Name = "Full Set"
  # Секция содержит пути к резервируемым файлам/каталогам
  Include {
    # Секция определяющая параметры резервирования файлов/каталогов
    Options {
      # Параметр указывает алгоритм вычисления контрольных сумм файлов
      signature = MD5
      # Параметр указывает алгоритм сжатия файлов
      Compression = GZIP
      # Параметр указывает на необходимость рекурсивного резервирования,
      recurse = yes
      # Параметр указывающий на необходимость сохранения ACL информации
      aclsupport = yes
      # указывает на возможность включения поддержки расширенных атрибутов,
      xattrsupport = yes
    }
    # копируемый каталог
    File = /home
  }

  # пути к файлам/каталогам, которые необходимо исключить
  Exclude {
    File = /tmp
  }
}